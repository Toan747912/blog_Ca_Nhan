<!DOCTYPE html>
<html lang="vi-VN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>XÃ¢y dá»±ng á»¨ng dá»¥ng Chat Hai chiá»u (Client-Server) vá»›i Java Sockets | Blog | NgÃ´ Quá»‘c ToÃ n</title>
    
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        
                        'dark-bg': '#0f172a', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-card': '#1e293b', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-border': '#334155', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-text-primary': '#f1f5f9', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-text-secondary': '#94a3b8', 
                    },
                }
            }
        }
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/css/main.css">

</head>
<body class="min-h-screen text-gray-900 dark:text-dark-text-primary transition-colors duration-300">
    <div class="flex flex-col min-h-screen bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 dark:from-gray-900 dark:to-indigo-900 p-4 md:p-8">
        
        
        <header class="sticky top-0 z-50 w-full bg-transparent backdrop-blur-lg border-b border-gray-200 dark:border-gray-800 transition-colors duration-300">
    <nav class="max-w-4xl mx-auto flex justify-between items-center py-4 px-4 sm:px-6 lg:px-8">
        
        
        <a href="/" class="text-2xl font-bold text-gray-900 dark:text-white hover:opacity-80 transition-opacity">
            NgÃ´ Quá»‘c ToÃ n
        </a>

        
        <div class="flex items-center space-x-5 sm:space-x-8">
            
            
            <div class="hidden sm:flex items-center space-x-6">
                
                    <a href="/" 
                       class="text-lg font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors
                              ">
                        Trang Chá»§
                    </a>
                
                    <a href="/blog/" 
                       class="text-lg font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors
                              
                                text-blue-600 dark:text-blue-400 font-semibold
                              ">
                        Blog
                    </a>
                
                    <a href="/about/" 
                       class="text-lg font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors
                              ">
                        Profile
                    </a>
                
            </div>

            
            <button id="dark-mode-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none rounded-lg text-sm p-2.5">
                <span class="sr-only">Báº­t/Táº¯t Cháº¿ Ä‘á»™ Tá»‘i</span>
                
                <svg class="w-5 h-5 light-icon hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1zM6.465 6.95A1 1 0 115.05 5.536l.707-.707A1 1 0 016.464 6.23l-.707.707z"></path></svg>
                
                <svg class="w-5 h-5 dark-icon hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
            </button>

            
            
        </div>
    </nav>
</header>

        
        <main class="flex-grow">
            
<div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col lg:flex-row lg:space-x-12">
        
        
        <article class="flex-1 min-w-0">
            <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4 tracking-tight">
                XÃ¢y dá»±ng á»¨ng dá»¥ng Chat Hai chiá»u (Client-Server) vá»›i Java Sockets
            </h1>
            
            <div class="flex items-center space-x-4 text-gray-500 dark:text-gray-400 mb-8">
                <span>October 26, 2025</span>
                <span>&middot;</span>
                
                <span>Java</span>
                
            </div>

            <div class="prose prose-lg lg:prose-xl dark:prose-invert max-w-none">
                <p><em><strong><span class="text-green">Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m tháº¿ nÃ o cÃ¡c á»©ng dá»¥ng nhÆ° Messenger, Zalo hay game online cÃ³ thá»ƒ gá»­i tin nháº¯n qua láº¡i ngay láº­p tá»©c?</span></strong></em> ğŸš€</p>
<p>HÃ´m nay, chÃºng ta sáº½ lá»™t tráº§n &ldquo;phÃ©p thuáº­t&rdquo; Ä‘Ã³. ChÃºng ta sáº½ xÃ¢y dá»±ng má»™t há»‡ thá»‘ng Ä‘iá»‡n thoáº¡i tÆ° nhÃ¢n Ä‘Æ¡n giáº£n chá»‰ báº±ng Java.</p>
<p><em><strong>Ã tÆ°á»Ÿng cá»‘t lÃµi (Theo phÆ°Æ¡ng phÃ¡p Peyman):</strong></em> Äá»ƒ hai mÃ¡y tÃ­nh nÃ³i chuyá»‡n, chÃºng ta cáº§n thiáº¿t láº­p má»™t cuá»™c gá»i Ä‘iá»‡n thoáº¡i ğŸ“.</p>
<ul>
<li><em><strong>Server (MÃ¡y chá»§):</strong></em> LÃ  ngÆ°á»i trá»±c tá»•ng Ä‘Ã i. NgÆ°á»i nÃ y khÃ´ng gá»i cho ai cáº£. Há» cáº¯m Ä‘iá»‡n thoáº¡i vÃ o, má»Ÿ Ä‘Æ°á»ng dÃ¢y (vÃ­ dá»¥: mÃ¡y láº» 1234), vÃ  chá» ngÆ°á»i khÃ¡c gá»i Ä‘áº¿n.</li>
<li><em><strong>Client (MÃ¡y khÃ¡ch):</strong></em> LÃ  ngÆ°á»i chá»§ Ä‘á»™ng gá»i Ä‘iá»‡n. NgÆ°á»i nÃ y nháº¥c mÃ¡y lÃªn, báº¥m Ä‘Ãºng sá»‘ cá»§a tá»•ng Ä‘Ã i (Ä‘á»‹a chá»‰ IP) vÃ  Ä‘Ãºng sá»‘ mÃ¡y láº» (Port) Ä‘á»ƒ káº¿t ná»‘i.</li>
</ul>
<p>Khi káº¿t ná»‘i thÃ nh cÃ´ng, má»™t &ldquo;cuá»™c gá»i&rdquo; (Socket) Ä‘Æ°á»£c thiáº¿t láº­p. Trong cuá»™c gá»i nÃ y:</p>
<ul>
<li>Báº¡n nÃ³i vÃ o <em><strong>MicrÃ´</strong></em> (Ä‘Ã³ lÃ  <code>OutputStream</code> - Luá»“ng ra).</li>
<li>Báº¡n nghe tá»« <em><strong>Loa</strong></em> (Ä‘Ã³ lÃ  <code>InputStream</code> - Luá»“ng vÃ o).</li>
</ul>
<p>ChÃºng ta sáº½ xÃ¢y dá»±ng cáº£ hai bÃªn: Tá»•ng Ä‘Ã i (Server) vÃ  NgÆ°á»i gá»i (Client).</p>
<h3 id="pháº§n-1-xÃ¢y-dá»±ng-server-"><em><strong>Pháº§n 1: XÃ¢y dá»±ng Server (ğŸ‘· &ldquo;NgÆ°á»i trá»±c tá»•ng Ä‘Ã i&rdquo;)</strong></em></h3>
<p>Nhiá»‡m vá»¥ cá»§a Server lÃ :</p>
<ol>
<li>Má»Ÿ má»™t &ldquo;Cá»•ng&rdquo; (Port) vÃ  láº¯ng nghe.</li>
<li>Khi cÃ³ Client gá»i Ä‘áº¿n, &ldquo;nháº¥c mÃ¡y&rdquo; (cháº¥p nháº­n káº¿t ná»‘i).</li>
<li>Cáº§m láº¥y &ldquo;Mic&rdquo; vÃ  &ldquo;Loa&rdquo; Ä‘á»ƒ chuáº©n bá»‹ nÃ³i chuyá»‡n.</li>
</ol>
<h4 id="bÆ°á»›c-11-má»Ÿ-tá»•ng-Ä‘Ã i-lá»›p"><em><strong>BÆ°á»›c 1.1: Má»Ÿ Tá»•ng Ä‘Ã i (Lá»›p <code>ServerSocket</code>)</strong></em></h4>
<p>Viá»‡c Ä‘áº§u tiÃªn Server cáº§n lÃ m lÃ  nÃ³i vá»›i há»‡ Ä‘iá»u hÃ nh: &ldquo;NÃ y, tÃ´i muá»‘n nháº­n cÃ¡c cuá»™c gá»i Ä‘áº¿n á»Ÿ cá»•ng sá»‘ 9999.&rdquo;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.ServerSocket;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.Socket;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChatServer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 1. Má»Ÿ tá»•ng Ä‘Ã i á»Ÿ cá»•ng 9999</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> port <span style="color:#f92672">=</span> 9999;
</span></span><span style="display:flex;"><span>            ServerSocket serverSocket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket(port);
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server Ä‘ang cháº¡y vÃ  láº¯ng nghe á»Ÿ cá»•ng &#34;</span> <span style="color:#f92672">+</span> port);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ... (CÃ¡c bÆ°á»›c tiáº¿p theo)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><em><strong>Giáº£i thÃ­ch (Peyman):</strong></em></p>
<ul>
<li><code>ServerSocket serverSocket = new ServerSocket(port);</code>
<ul>
<li><em><strong>Analogy:</strong></em> ÄÃ¢y chÃ­nh lÃ  hÃ nh Ä‘á»™ng báº¡n cáº¯m Ä‘iá»‡n thoáº¡i tá»•ng Ä‘Ã i vÃ o á»• Ä‘iá»‡n. Báº¡n chÆ°a nÃ³i chuyá»‡n, báº¡n chá»‰ má»›i sáºµn sÃ ng nháº­n cuá»™c gá»i. Con sá»‘ <code>9999</code> lÃ  sá»‘ mÃ¡y láº» mÃ  báº¡n chá»n. Báº¥t ká»³ Client nÃ o muá»‘n nÃ³i chuyá»‡n vá»›i báº¡n Ä‘á»u pháº£i quay sá»‘ nÃ y.</li>
</ul>
</li>
</ul>
<h4 id="bÆ°á»›c-12-chá»-vÃ -nháº¥c-mÃ¡y-hÃ m"><em><strong>BÆ°á»›c 1.2: Chá» vÃ  Nháº¥c mÃ¡y (HÃ m <code>accept()</code>)</strong></em></h4>
<p>Tá»•ng Ä‘Ã i Ä‘Ã£ má»Ÿ. Giá» ngÆ°á»i trá»±c tá»•ng Ä‘Ã i pháº£i ngá»“i&hellip; chá».</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ThÃªm vÃ o sau dÃ²ng ServerSocket...</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ...</span>
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Äang chá» Client káº¿t ná»‘i...&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 2. Chá» ai Ä‘Ã³ gá»i Ä‘áº¿n. DÃ²ng nÃ y sáº½ &#34;treo&#34; (block)</span>
</span></span><span style="display:flex;"><span>    Socket clientSocket <span style="color:#f92672">=</span> serverSocket.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Client Ä‘Ã£ káº¿t ná»‘i tá»«: &#34;</span> <span style="color:#f92672">+</span> clientSocket.<span style="color:#a6e22e">getInetAddress</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ... (CÃ¡c bÆ°á»›c tiáº¿p theo)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>    e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><em><strong>Giáº£i thÃ­ch (Peyman):</strong></em></p>
<ul>
<li><code>Socket clientSocket = serverSocket.accept();</code>
<ul>
<li><em><strong>Analogy:</strong></em> ÄÃ¢y lÃ  hÃ nh Ä‘á»™ng quan trá»ng nháº¥t. <code>accept()</code> cÃ³ nghÄ©a lÃ  &ldquo;cháº¥p nháº­n&rdquo;. DÃ²ng code nÃ y sáº½ dá»«ng chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n láº¡i (giá»‘ng nhÆ° ngÆ°á»i trá»±c tá»•ng Ä‘Ã i ngá»“i im nhÃ¬n vÃ o báº£ng Ä‘iá»‡n thoáº¡i).</li>
<li>ChÆ°Æ¡ng trÃ¬nh sáº½ chá»&hellip; cho Ä‘áº¿n khi&hellip; <em><strong>Reng! Reng!</strong></em> ğŸ””</li>
<li>Khi cÃ³ má»™t Client gá»i Ä‘áº¿n cá»•ng 9999, hÃ m <code>accept()</code> sáº½ &ldquo;nháº¥c mÃ¡y&rdquo;.</li>
<li>VÃ  nÃ³ tráº£ vá» má»™t thá»© cá»±c ká»³ quan trá»ng: má»™t Ä‘á»‘i tÆ°á»£ng <code>Socket</code>.</li>
</ul>
</li>
</ul>
<p><em><strong>Khoan, táº¡i sao láº¡i lÃ  <code>Socket</code>?</strong></em></p>
<ul>
<li><code>ServerSocket</code> (Tá»•ng Ä‘Ã i) khÃ´ng trá»±c tiáº¿p nÃ³i chuyá»‡n. Nhiá»‡m vá»¥ cá»§a nÃ³ chá»‰ lÃ  láº¯ng nghe vÃ  ná»‘i mÃ¡y.</li>
<li><code>Socket</code> (Cuá»™c gá»i) má»›i lÃ  thá»© dÃ¹ng Ä‘á»ƒ nÃ³i chuyá»‡n. <code>clientSocket</code> chÃ­nh lÃ  cuá»™c gá»i riÃªng mÃ  tá»•ng Ä‘Ã i vá»«a káº¿t ná»‘i cho báº¡n vá»›i vá»‹ khÃ¡ch Ä‘Ã³.</li>
</ul>
<h4 id="bÆ°á»›c-13-láº¥y"><em><strong>BÆ°á»›c 1.3: Láº¥y &ldquo;Mic&rdquo; vÃ  &ldquo;Loa&rdquo; (Streams)</strong></em></h4>
<p>OK, Ä‘Ã£ káº¿t ná»‘i. Giá» chÃºng ta cáº§n phÆ°Æ¡ng tiá»‡n Ä‘á»ƒ nÃ³i vÃ  nghe qua cÃ¡i <code>clientSocket</code> nÃ y.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.OutputStream;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ... (ThÃªm cÃ¡c import nÃ y á»Ÿ Ä‘áº§u file)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ...</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ...</span>
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Client Ä‘Ã£ káº¿t ná»‘i...&#34;</span>);
</span></span><span style="display:flex;"><span>    Socket clientSocket <span style="color:#f92672">=</span> serverSocket.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 3. Láº¥y luá»“ng vÃ o (Loa) vÃ  luá»“ng ra (Mic)</span>
</span></span><span style="display:flex;"><span>    InputStream input <span style="color:#f92672">=</span> clientSocket.<span style="color:#a6e22e">getInputStream</span>();
</span></span><span style="display:flex;"><span>    OutputStream output <span style="color:#f92672">=</span> clientSocket.<span style="color:#a6e22e">getOutputStream</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ... (BÆ°á»›c 4: NÃ³i chuyá»‡n)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>    e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><em><strong>Giáº£i thÃ­ch (Peyman):</strong></em></p>
<ul>
<li><code>clientSocket.getInputStream()</code>: ÄÃ¢y lÃ  hÃ nh Ä‘á»™ng &ldquo;cáº§m láº¥y cÃ¡i Loa ğŸ”ˆ&rdquo;. Báº¥t cá»© thá»© gÃ¬ Client nÃ³i (gá»­i), chÃºng ta sáº½ nghe (Ä‘á»c) Ä‘Æ°á»£c tá»« cÃ¡i <code>input</code> nÃ y.</li>
<li><code>clientSocket.getOutputStream()</code>: ÄÃ¢y lÃ  hÃ nh Ä‘á»™ng &ldquo;cáº§m láº¥y cÃ¡i MicrÃ´ ğŸ¤&rdquo;. Báº¥t cá»© thá»© gÃ¬ chÃºng ta nÃ³i (viáº¿t) vÃ o cÃ¡i <code>output</code> nÃ y, Client sáº½ nghe (Ä‘á»c) Ä‘Æ°á»£c.</li>
</ul>
<p>Server Ä‘Ã£ sáºµn sÃ ng! Giá» chÃºng ta qua xÃ¢y dá»±ng Client.</p>
<h3 id="pháº§n-2-xÃ¢y-dá»±ng-client-"><em><strong>Pháº§n 2: XÃ¢y dá»±ng Client (ğŸ“ &ldquo;NgÆ°á»i gá»i Ä‘iá»‡n&rdquo;)</strong></em></h3>
<p>Nhiá»‡m vá»¥ cá»§a Client Ä‘Æ¡n giáº£n hÆ¡n:</p>
<ol>
<li>Biáº¿t Ä‘á»‹a chá»‰ vÃ  cá»•ng cá»§a Server.</li>
<li>Chá»§ Ä‘á»™ng &ldquo;quay sá»‘&rdquo; Ä‘á»ƒ káº¿t ná»‘i.</li>
<li>Cáº§m láº¥y &ldquo;Mic&rdquo; vÃ  &ldquo;Loa&rdquo;.</li>
</ol>
<h4 id="bÆ°á»›c-21-quay-sá»‘-lá»›p"><em><strong>BÆ°á»›c 2.1: Quay sá»‘ (Lá»›p <code>Socket</code>)</strong></em></h4>
<p>Client khÃ´ng cáº§n <code>ServerSocket</code>, vÃ¬ Client khÃ´ng láº¯ng nghe. Client hÃ nh Ä‘á»™ng.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.Socket;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.OutputStream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChatClient</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 1. Quay sá»‘ Ä‘áº¿n Server</span>
</span></span><span style="display:flex;"><span>            String serverAddress <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;localhost&#34;</span>; <span style="color:#75715e">// Hoáº·c &#34;127.0.0.1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> serverPort <span style="color:#f92672">=</span> 9999;
</span></span><span style="display:flex;"><span>            Socket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Socket(serverAddress, serverPort);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;ÄÃ£ káº¿t ná»‘i tá»›i Server!&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 2. Láº¥y luá»“ng vÃ o (Loa) vÃ  luá»“ng ra (Mic)</span>
</span></span><span style="display:flex;"><span>            InputStream input <span style="color:#f92672">=</span> socket.<span style="color:#a6e22e">getInputStream</span>();
</span></span><span style="display:flex;"><span>            OutputStream output <span style="color:#f92672">=</span> socket.<span style="color:#a6e22e">getOutputStream</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ... (BÆ°á»›c 3: NÃ³i chuyá»‡n)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><em><strong>Giáº£i thÃ­ch (Peyman):</strong></em></p>
<ul>
<li><code>Socket socket = new Socket(&quot;localhost&quot;, 9999);</code>
<ul>
<li><em><strong>Analogy:</strong></em> ÄÃ¢y chÃ­nh lÃ  hÃ nh Ä‘á»™ng nháº¥c mÃ¡y vÃ  báº¥m sá»‘.</li>
<li><code>&quot;localhost&quot;</code>: LÃ  &ldquo;sá»‘ Ä‘iá»‡n thoáº¡i&rdquo; cá»§a Server. <code>localhost</code> lÃ  má»™t tÃªn Ä‘áº·c biá»‡t, cÃ³ nghÄ©a lÃ  &ldquo;chÃ­nh mÃ¡y tÃ­nh nÃ y&rdquo;. (VÃ¬ chÃºng ta Ä‘ang cháº¡y cáº£ Server vÃ  Client trÃªn cÃ¹ng 1 mÃ¡y Ä‘á»ƒ thá»­). Náº¿u Server á»Ÿ mÃ¡y khÃ¡c, báº¡n sáº½ Ä‘iá»n IP cá»§a mÃ¡y Ä‘Ã³, vÃ­ dá»¥ <code>192.168.1.50</code>.</li>
<li><code>9999</code>: LÃ  &ldquo;sá»‘ mÃ¡y láº»&rdquo; (Port) mÃ  Server Ä‘ang láº¯ng nghe. Pháº£i khá»›p 100% vá»›i sá»‘ trÃªn <code>ServerSocket</code>.</li>
</ul>
</li>
</ul>
<p>Ngay khi dÃ²ng code nÃ y cháº¡y, nÃ³ sáº½ tÃ¬m Ä‘áº¿n Server. Server Ä‘ang chá» á»Ÿ <code>accept()</code> sáº½ &ldquo;nháº¥c mÃ¡y&rdquo;. VÃ  <em><strong>BÃ¹m!</strong></em> ğŸ’¥ Káº¿t ná»‘i Ä‘Æ°á»£c thiáº¿t láº­p.</p>
<p>LÃºc nÃ y, cáº£ Server vÃ  Client Ä‘á»u cÃ³ &ldquo;Mic&rdquo; (<code>OutputStream</code>) vÃ  &ldquo;Loa&rdquo; (<code>InputStream</code>).</p>
<h3 id="pháº§n-3-cuá»™c-há»™i-thoáº¡i-hai-chiá»u-nÃ³i-vÃ -nghe"><em><strong>Pháº§n 3: Cuá»™c há»™i thoáº¡i Hai chiá»u (NÃ³i vÃ  Nghe)</strong></em></h3>
<p>ÄÃ¢y lÃ  pháº§n thÃº vá»‹ nháº¥t. ChÃºng ta cÃ³ &ldquo;Loa&rdquo; vÃ  &ldquo;Mic&rdquo;, nhÆ°ng chÃºng chá»‰ hiá»ƒu &ldquo;ngÃ´n ngá»¯ mÃ¡y&rdquo; (bytes). ChÃºng ta chat báº±ng vÄƒn báº£n (String).</p>
<p><em><strong>Váº¥n Ä‘á»:</strong></em> LÃ m sao Ä‘á»ƒ dá»‹ch <code>String</code> (chá»¯) cá»§a chÃºng ta thÃ nh <code>byte</code> (Ä‘á»ƒ &ldquo;nÃ³i vÃ o Mic&rdquo;) vÃ  dá»‹ch <code>byte</code> (tá»« &ldquo;Loa&rdquo;) ngÆ°á»£c láº¡i thÃ nh <code>String</code>?</p>
<p><em><strong>Giáº£i phÃ¡p:</strong></em> ChÃºng ta thuÃª &ldquo;Trá»£ lÃ½&rdquo;.</p>
<ul>
<li><em><strong>Äá»ƒ Gá»­i tin (NÃ³i):</strong></em> ChÃºng ta dÃ¹ng <code>PrintWriter</code>. NÃ³ sáº½ dá»‹ch <code>String</code> cá»§a báº¡n thÃ nh byte vÃ  gá»­i Ä‘i.</li>
<li><em><strong>Äá»ƒ Nháº­n tin (Nghe):</strong></em> ChÃºng ta dÃ¹ng <code>BufferedReader</code> vÃ  <code>InputStreamReader</code>. Cáº·p Ä‘Ã´i nÃ y sáº½ há»©ng byte tá»« &ldquo;Loa&rdquo;, dá»‹ch chÃºng thÃ nh chá»¯, vÃ  ghÃ©p láº¡i thÃ nh cÃ¢u hoÃ n chá»‰nh.</li>
</ul>
<h4 id="bÆ°á»›c-31-gá»­i-dá»¯-liá»‡u-dÃ¹ng-printwriter-">BÆ°á»›c 3.1: Gá»­i Dá»¯ liá»‡u (DÃ¹ng <code>PrintWriter</code> âœï¸)</h4>
<p>HÃ£y tÆ°á»Ÿng tÆ°á»£ng <code>PrintWriter</code> lÃ  ngÆ°á»i trá»£ lÃ½ ghi chÃ©p. Báº¡n Ä‘Æ°a cho anh ta má»™t cÃ¢u (String), anh ta sáº½ mÃ£ hÃ³a nÃ³ vÃ  hÃ©t vÃ o Mic (<code>OutputStream</code>).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ThÃªm import:</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.PrintWriter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Láº¥y Mic</span>
</span></span><span style="display:flex;"><span>OutputStream output <span style="color:#f92672">=</span> socket.<span style="color:#a6e22e">getOutputStream</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ThuÃª &#34;Trá»£ lÃ½ Ghi&#34; gáº¯n vÃ o Mic</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// true (autoFlush) nghÄ©a lÃ : &#34;NÃ³i xong cÃ¢u nÃ o gá»­i Ä‘i ngay láº­p tá»©c!&#34;</span>
</span></span><span style="display:flex;"><span>PrintWriter writer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(output, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Gá»­i tin nháº¯n Ä‘áº§u tiÃªn</span>
</span></span><span style="display:flex;"><span>writer.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Xin chÃ o Server, tÃ´i lÃ  Client!&#34;</span>);
</span></span></code></pre></div><p><em><strong>Giáº£i thÃ­ch (Peyman):</strong></em></p>
<ul>
<li><code>new PrintWriter(output, true)</code>: ChÃºng ta &ldquo;gáº¯n&rdquo; Trá»£ lÃ½ <code>PrintWriter</code> vÃ o cÃ¡i Mic <code>output</code>.</li>
<li><code>true</code> (autoFlush): <em><strong>Cá»°C Ká»² QUAN TRá»ŒNG</strong></em>. NÃ³ nghÄ©a lÃ  &ldquo;Gá»­i Ä‘i ngay!&rdquo;. Náº¿u báº¡n Ä‘á»ƒ lÃ  <code>false</code> (máº·c Ä‘á»‹nh), <code>PrintWriter</code> sáº½&hellip; lÆ°á»i biáº¿ng. NÃ³ sáº½ gom nhiá»u cÃ¢u cá»§a báº¡n láº¡i (Ä‘á»ƒ tiáº¿t kiá»‡m) rá»“i má»›i gá»­i Ä‘i má»™t cá»¥c. NhÆ°ng Ä‘Ã¢y lÃ  chat, chÃºng ta muá»‘n gá»­i ngay!</li>
<li><code>writer.println(...)</code>: ÄÃ¢y lÃ  hÃ nh Ä‘á»™ng &ldquo;NÃ³i!&rdquo;. <code>println</code> tiá»‡n lá»£i vÃ¬ nÃ³ tá»± Ä‘á»™ng thÃªm dáº¥u xuá»‘ng dÃ²ng (Enter) vÃ o cuá»‘i, bÃ¡o hiá»‡u cho bÃªn kia biáº¿t lÃ  &ldquo;háº¿t cÃ¢u&rdquo;.</li>
</ul>
<h4 id="bÆ°á»›c-32-Ä‘á»c-dá»¯-liá»‡u-dÃ¹ng-bufferedreader-">BÆ°á»›c 3.2: Äá»c Dá»¯ liá»‡u (DÃ¹ng <code>BufferedReader</code> ğŸ§)</h4>
<p>BÃ¢y giá» lÃ  &ldquo;Nghe&rdquo;. Viá»‡c nÃ y cáº§n 2 trá»£ lÃ½:</p>
<ol>
<li><code>InputStreamReader</code>: Anh chÃ ng nÃ y Ä‘á»©ng sÃ¡t &ldquo;Loa&rdquo; (<code>input</code>), nháº·t tá»«ng byte vÃ  dá»‹ch thÃ nh kÃ½ tá»± (vÃ­ dá»¥: &lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;).</li>
<li><code>BufferedReader</code>: Anh chÃ ng nÃ y thÃ´ng minh hÆ¡n. Anh ta Ä‘á»©ng sau <code>InputStreamReader</code>, láº¥y cÃ¡c kÃ½ tá»± Ä‘Ã³ vÃ  Ä‘á»‡m (buffer) chÃºng láº¡i, cho Ä‘áº¿n khi nÃ o gáº·p dáº¥u xuá»‘ng dÃ²ng (Enter), anh ta sáº½ gá»™p táº¥t cáº£ láº¡i thÃ nh má»™t <code>String</code> (má»™t cÃ¢u hoÃ n chá»‰nh) vÃ  Ä‘Æ°a cho báº¡n.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ThÃªm import:</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.BufferedReader;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.InputStreamReader;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Láº¥y Loa</span>
</span></span><span style="display:flex;"><span>InputStream input <span style="color:#f92672">=</span> socket.<span style="color:#a6e22e">getInputStream</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ThuÃª &#34;Trá»£ lÃ½ Äá»c&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Bá»c tá»« trong ra ngoÃ i: input -&gt; InputStreamReader -&gt; BufferedReader</span>
</span></span><span style="display:flex;"><span>BufferedReader reader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(input));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Chá» nghe má»™t cÃ¢u...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// DÃ²ng nÃ y láº¡i &#34;treo&#34; (block) cho Ä‘áº¿n khi cÃ³ tin nháº¯n!</span>
</span></span><span style="display:flex;"><span>String line <span style="color:#f92672">=</span> reader.<span style="color:#a6e22e">readLine</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Tin nháº¯n nháº­n Ä‘Æ°á»£c: &#34;</span> <span style="color:#f92672">+</span> line);
</span></span></code></pre></div><p><em><strong>Giáº£i thÃ­ch (Peyman):</strong></em></p>
<ul>
<li><code>reader.readLine()</code>: TÆ°Æ¡ng tá»± <code>accept()</code>, Ä‘Ã¢y lÃ  má»™t hÃ m <em><strong>blocking</strong></em>. NÃ³ sáº½ ngá»“i im, &ldquo;ghÃ© tai vÃ o Loa&rdquo;, vÃ  chá»&hellip; chá»&hellip;</li>
<li>Khi <code>PrintWriter</code> á»Ÿ bÃªn kia dÃ¹ng <code>println()</code> gá»­i má»™t cÃ¢u, <code>readLine()</code> sáº½ nháº­n Ä‘Æ°á»£c nÃ³, tráº£ vá» cÃ¢u Ä‘Ã³ dÆ°á»›i dáº¡ng <code>String</code> (vÃ­ dá»¥: &ldquo;Xin chÃ o Server, tÃ´i lÃ  Client!&rdquo;), vÃ  chÆ°Æ¡ng trÃ¬nh tiáº¿p tá»¥c cháº¡y.</li>
</ul>
<h3 id="pháº§n-4-váº¥n-Ä‘á»-cá»±c-lá»›n-vÃ -giáº£i-phÃ¡p"><em><strong>Pháº§n 4: Váº¥n Ä‘á» Cá»±c lá»›n (VÃ  Giáº£i phÃ¡p)</strong></em></h3>
<p>ChÃºng ta Ä‘Ã£ cÃ³ Ä‘á»§ cÃ´ng cá»¥. Giá» hÃ£y thá»­ ghÃ©p chÃºng láº¡i.</p>
<p>Náº¿u Server lÃ m tháº¿ nÃ y:</p>
<ol>
<li>Äá»c tin nháº¯n tá»« Client (<code>reader.readLine()</code>)</li>
<li>In ra mÃ n hÃ¬nh.</li>
<li>GÃµ tráº£ lá»i (<code>writer.println()</code>)</li>
</ol>
<p>Client cÅ©ng lÃ m tháº¿ nÃ y:</p>
<ol>
<li>GÃµ gá»­i tin nháº¯n (<code>writer.println()</code>)</li>
<li>Chá» Server tráº£ lá»i (<code>reader.readLine()</code>)</li>
<li>In ra mÃ n hÃ¬nh.</li>
</ol>
<p>Báº¡n tháº¥y váº¥n Ä‘á» khÃ´ng? NÃ³ giá»‘ng nhÆ° hai ngÆ°á»i dÃ¹ng bá»™ Ä‘Ã m (walkie-talkie). Má»™t ngÆ°á»i pháº£i nÃ³i &ldquo;Over!&rdquo; (Háº¿t) thÃ¬ ngÆ°á»i kia má»›i Ä‘Æ°á»£c nÃ³i. Cáº£ hai khÃ´ng thá»ƒ nÃ³i cÃ¹ng má»™t lÃºc.</p>
<p>Náº¿u cáº£ hai cÃ¹ng cháº¡y <code>reader.readLine()</code> (cÃ¹ng ghÃ© tai vÃ o Loa), cáº£ hai sáº½ cÃ¹ng chá»&hellip; vÃ  khÃ´ng ai nÃ³i cáº£! ğŸ˜µ ÄÃ¢y gá»i lÃ  <em><strong>Deadlock</strong></em>.</p>
<p><em><strong>Giáº£i phÃ¡p (ÄÃ¢y lÃ  bÃ­ máº­t cá»§a á»©ng dá»¥ng chat):</strong></em> ChÃºng ta cáº§n <em><strong>Äa luá»“ng (Threading)</strong></em>. Nghe cÃ³ váº» Ä‘Ã¡ng sá»£, nhÆ°ng Ã½ tÆ°á»Ÿng ráº¥t Ä‘Æ¡n giáº£n:</p>
<p>HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n (chÆ°Æ¡ng trÃ¬nh chÃ­nh) phÃ¢n thÃ¢n ra lÃ m hai.</p>
<ul>
<li><em><strong>Báº£n thá»ƒ 1 (Luá»“ng chÃ­nh - Main Thread):</strong></em> Chá»‰ lÃ m má»™t viá»‡c: Chá» báº¡n gÃµ phÃ­m. Khi báº¡n gÃµ xong vÃ  Enter, nÃ³ dÃ¹ng <code>PrintWriter</code> (Mic) Ä‘á»ƒ gá»­i Ä‘i.</li>
<li><em><strong>Báº£n thá»ƒ 2 (Luá»“ng má»›i - New Thread):</strong></em> Chá»‰ lÃ m má»™t viá»‡c: Cháº¡y má»™t vÃ²ng láº·p vÄ©nh viá»…n <code>while(true)</code>, liÃªn tá»¥c &ldquo;ghÃ© tai vÃ o Loa&rdquo; (<code>reader.readLine()</code>). Há»… nghe Ä‘Æ°á»£c gÃ¬, nÃ³ láº­p tá»©c in ra mÃ n hÃ¬nh.</li>
</ul>
<p>Báº±ng cÃ¡ch nÃ y, báº¡n cÃ³ thá»ƒ vá»«a gÃµ tin nháº¯n cá»§a mÃ¬nh (á»Ÿ Luá»“ng 1) trong khi váº«n nháº­n Ä‘Æ°á»£c tin nháº¯n cá»§a ngÆ°á»i khÃ¡c (á»Ÿ Luá»“ng 2) ngay láº­p tá»©c. ÄÃ³ má»›i lÃ  chat!</p>
<h3 id="pháº§n-5-code-hoÃ n-chá»‰nh-ghÃ©p-táº¥t-cáº£-láº¡i"><em><strong>Pháº§n 5: Code HoÃ n chá»‰nh (GhÃ©p táº¥t cáº£ láº¡i)</strong></em></h3>
<p>ÄÃ¢y lÃ  code cuá»‘i cÃ¹ng cho má»™t á»©ng dá»¥ng chat 2 chiá»u thá»±c sá»±.</p>
<h4 id="-chatserverjava-tá»•ng-Ä‘Ã i">ğŸ“ ChatServer.java (Tá»•ng Ä‘Ã i)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.ServerSocket;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.Socket;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Scanner;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChatServer</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> (ServerSocket serverSocket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket(9999)) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server Ä‘ang chá» káº¿t ná»‘i á»Ÿ cá»•ng 9999...&#34;</span>);
</span></span><span style="display:flex;"><span>            Socket clientSocket <span style="color:#f92672">=</span> serverSocket.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Client Ä‘Ã£ káº¿t ná»‘i!&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Cáº§m láº¥y &#34;Loa&#34; vÃ  &#34;Mic&#34;</span>
</span></span><span style="display:flex;"><span>            BufferedReader reader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(clientSocket.<span style="color:#a6e22e">getInputStream</span>()));
</span></span><span style="display:flex;"><span>            PrintWriter writer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(clientSocket.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Báº¯t Ä‘áº§u &#34;Luá»“ng Nghe&#34; (Báº£n thá»ƒ 2)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ChÃºng ta táº¡o má»™t &#34;nhÃ¢n viÃªn&#34; má»›i chá»‰ Ä‘á»ƒ nghe</span>
</span></span><span style="display:flex;"><span>            Thread listenThread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                    String clientMessage;
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">while</span> ((clientMessage <span style="color:#f92672">=</span> reader.<span style="color:#a6e22e">readLine</span>()) <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>                        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Client nÃ³i: &#34;</span> <span style="color:#f92672">+</span> clientMessage);
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>                    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Client Ä‘Ã£ ngáº¯t káº¿t ná»‘i.&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            listenThread.<span style="color:#a6e22e">start</span>(); <span style="color:#75715e">// Cho &#34;nhÃ¢n viÃªn&#34; báº¯t Ä‘áº§u lÃ m viá»‡c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Luá»“ng chÃ­nh (Báº£n thá»ƒ 1) dÃ¹ng Ä‘á»ƒ &#34;NÃ³i&#34;</span>
</span></span><span style="display:flex;"><span>            Scanner consoleScanner <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Scanner(System.<span style="color:#a6e22e">in</span>);
</span></span><span style="display:flex;"><span>            String serverMessage;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>                serverMessage <span style="color:#f92672">=</span> consoleScanner.<span style="color:#a6e22e">nextLine</span>();
</span></span><span style="display:flex;"><span>                writer.<span style="color:#a6e22e">println</span>(serverMessage); <span style="color:#75715e">// Gá»­i Ä‘i</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="-chatclientjava-ngÆ°á»i-gá»i">ğŸ“ ChatClient.java (NgÆ°á»i gá»i)</h4>
<p>Code cá»§a Client gáº§n nhÆ° giá»‘ng há»‡t Server, chá»‰ khÃ¡c á»Ÿ bÆ°á»›c káº¿t ná»‘i ban Ä‘áº§u.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.Socket;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Scanner;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChatClient</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> (Socket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Socket(<span style="color:#e6db74">&#34;localhost&#34;</span>, 9999)) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;ÄÃ£ káº¿t ná»‘i tá»›i Server!&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Cáº§m láº¥y &#34;Loa&#34; vÃ  &#34;Mic&#34;</span>
</span></span><span style="display:flex;"><span>            BufferedReader reader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(socket.<span style="color:#a6e22e">getInputStream</span>()));
</span></span><span style="display:flex;"><span>            PrintWriter writer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(socket.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Báº¯t Ä‘áº§u &#34;Luá»“ng Nghe&#34; (Báº£n thá»ƒ 2)</span>
</span></span><span style="display:flex;"><span>            Thread listenThread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                    String serverMessage;
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">while</span> ((serverMessage <span style="color:#f92672">=</span> reader.<span style="color:#a6e22e">readLine</span>()) <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>                        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server nÃ³i: &#34;</span> <span style="color:#f92672">+</span> serverMessage);
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>                    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server Ä‘Ã£ ngáº¯t káº¿t ná»‘i.&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            listenThread.<span style="color:#a6e22e">start</span>(); <span style="color:#75715e">// Cho &#34;nhÃ¢n viÃªn&#34; báº¯t Ä‘áº§u lÃ m viá»‡c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Luá»“ng chÃ­nh (Báº£n thá»ƒ 1) dÃ¹ng Ä‘á»ƒ &#34;NÃ³i&#34;</span>
</span></span><span style="display:flex;"><span>            Scanner consoleScanner <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Scanner(System.<span style="color:#a6e22e">in</span>);
</span></span><span style="display:flex;"><span>            String clientMessage;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>                clientMessage <span style="color:#f92672">=</span> consoleScanner.<span style="color:#a6e22e">nextLine</span>();
</span></span><span style="display:flex;"><span>                writer.<span style="color:#a6e22e">println</span>(clientMessage); <span style="color:#75715e">// Gá»­i Ä‘i</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="cÃ¡ch-cháº¡y-thá»­">CÃ¡ch cháº¡y thá»­</h3>
<ol>
<li>Má»Ÿ 2 cá»­a sá»• terminal (hoáº·c 2 tab trong IDE cá»§a báº¡n).</li>
<li>BiÃªn dá»‹ch cáº£ 2 file: <code>javac ChatServer.java</code> vÃ  <code>javac ChatClient.java</code>.</li>
<li><em><strong>Cá»­a sá»• 1:</strong></em> Cháº¡y Server trÆ°á»›c: <code>java ChatServer</code>
<ul>
<li>Báº¡n sáº½ tháº¥y: <code>Server Ä‘ang chá» káº¿t ná»‘i á»Ÿ cá»•ng 9999...</code></li>
</ul>
</li>
<li><em><strong>Cá»­a sá»• 2:</strong></em> Cháº¡y Client: <code>java ChatClient</code>
<ul>
<li>Báº¡n sáº½ tháº¥y: <code>ÄÃ£ káº¿t ná»‘i tá»›i Server!</code></li>
<li>Äá»“ng thá»i, Cá»­a sá»• 1 sáº½ hiá»ƒn thá»‹: <code>Client Ä‘Ã£ káº¿t ná»‘i!</code></li>
</ul>
</li>
</ol>
<p>BÃ¢y giá», hÃ£y gÃµ báº¥t cá»© thá»© gÃ¬ vÃ o má»™t cá»­a sá»• vÃ  nháº¥n Enter. NÃ³ sáº½ xuáº¥t hiá»‡n ngay láº­p tá»©c á»Ÿ cá»­a sá»• bÃªn kia!</p>
<p>Báº¡n Ä‘Ã£ lÃ m Ä‘Æ°á»£c rá»“i Ä‘Ã³! Báº¡n vá»«a xÃ¢y dá»±ng má»™t á»©ng dá»¥ng chat hai chiá»u tá»« con sá»‘ 0, hiá»ƒu rÃµ tá»«ng bÆ°á»›c má»™t. ğŸ‰</p>

            </div>
        </article>

        
        
        
        <aside class="hidden lg:block lg:w-64 xl:w-72 flex-shrink-0">
            <div class="sticky top-24 space-y-4">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Má»¥c lá»¥c</h3>
                <nav class="toc">
                    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#pháº§n-1-xÃ¢y-dá»±ng-server-"><em><strong>Pháº§n 1: XÃ¢y dá»±ng Server (ğŸ‘· â€œNgÆ°á»i trá»±c tá»•ng Ä‘Ã iâ€)</strong></em></a></li>
        <li><a href="#pháº§n-2-xÃ¢y-dá»±ng-client-"><em><strong>Pháº§n 2: XÃ¢y dá»±ng Client (ğŸ“ â€œNgÆ°á»i gá»i Ä‘iá»‡nâ€)</strong></em></a></li>
        <li><a href="#pháº§n-3-cuá»™c-há»™i-thoáº¡i-hai-chiá»u-nÃ³i-vÃ -nghe"><em><strong>Pháº§n 3: Cuá»™c há»™i thoáº¡i Hai chiá»u (NÃ³i vÃ  Nghe)</strong></em></a></li>
        <li><a href="#pháº§n-4-váº¥n-Ä‘á»-cá»±c-lá»›n-vÃ -giáº£i-phÃ¡p"><em><strong>Pháº§n 4: Váº¥n Ä‘á» Cá»±c lá»›n (VÃ  Giáº£i phÃ¡p)</strong></em></a></li>
        <li><a href="#pháº§n-5-code-hoÃ n-chá»‰nh-ghÃ©p-táº¥t-cáº£-láº¡i"><em><strong>Pháº§n 5: Code HoÃ n chá»‰nh (GhÃ©p táº¥t cáº£ láº¡i)</strong></em></a></li>
        <li><a href="#cÃ¡ch-cháº¡y-thá»­">CÃ¡ch cháº¡y thá»­</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </nav>
            </div>
        </aside>
        

    </div>
</div>

        </main>

        
        <footer class="bg-transparent border-t border-gray-200 dark:border-gray-700">
    <div class="max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <p class="text-center text-sm text-gray-500 dark:text-gray-400">
            
            Â© 2025 NgÃ´ Quá»‘c ToÃ n. ÄÃ£ Ä‘Äƒng kÃ½ báº£n quyá»n.
        </p>
    </div>
</footer>
    </div>

    
    <script src="/js/main.js"></script>

    
</body>
</html>
