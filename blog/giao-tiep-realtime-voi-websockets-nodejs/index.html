<!DOCTYPE html>
<html lang="vi-VN">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>&#39;Bá» Bá»“i bÃ n, Láº¯p Äiá»‡n thoáº¡i!&#39;: Giao tiáº¿p Real-time vá»›i WebSockets vÃ  Node.js | Blog | NgÃ´ Quá»‘c ToÃ n</title>
    
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        
                        'dark-bg': '#0f172a', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-card': '#1e293b', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-border': '#334155', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-text-primary': '#f1f5f9', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'dark-text-secondary': '#94a3b8', 
                    },
                }
            }
        }
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/css/main.css">

</head>
<body class="min-h-screen text-gray-900 dark:text-dark-text-primary transition-colors duration-300">
    <div class="flex flex-col min-h-screen bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 dark:from-gray-900 dark:to-indigo-900 p-4 md:p-8">
        
        
        <header class="sticky top-0 z-50 w-full bg-transparent backdrop-blur-lg border-b border-gray-200 dark:border-gray-800 transition-colors duration-300">
    <nav class="max-w-4xl mx-auto flex justify-between items-center py-4 px-4 sm:px-6 lg:px-8">
        
        
        <a href="/" class="text-2xl font-bold text-gray-900 dark:text-white hover:opacity-80 transition-opacity">
            NgÃ´ Quá»‘c ToÃ n
        </a>

        
        <div class="flex items-center space-x-5 sm:space-x-8">
            
            
            <div class="hidden sm:flex items-center space-x-6">
                
                    <a href="/" 
                       class="text-lg font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors
                              ">
                        Trang Chá»§
                    </a>
                
                    <a href="/blog/" 
                       class="text-lg font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors
                              
                                text-blue-600 dark:text-blue-400 font-semibold
                              ">
                        Blog
                    </a>
                
                    <a href="/about/" 
                       class="text-lg font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors
                              ">
                        Profile
                    </a>
                
            </div>

            
            <button id="dark-mode-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none rounded-lg text-sm p-2.5">
                <span class="sr-only">Báº­t/Táº¯t Cháº¿ Ä‘á»™ Tá»‘i</span>
                
                <svg class="w-5 h-5 light-icon hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1zM6.465 6.95A1 1 0 115.05 5.536l.707-.707A1 1 0 016.464 6.23l-.707.707z"></path></svg>
                
                <svg class="w-5 h-5 dark-icon hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
            </button>

            
            
        </div>
    </nav>
</header>

        
        <main class="flex-grow">
            
<div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col lg:flex-row lg:space-x-12">
        
        
        <article class="flex-1 min-w-0">
            <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4 tracking-tight">
                &#39;Bá» Bá»“i bÃ n, Láº¯p Äiá»‡n thoáº¡i!&#39;: Giao tiáº¿p Real-time vá»›i WebSockets vÃ  Node.js
            </h1>
            
            <div class="flex items-center space-x-4 text-gray-500 dark:text-gray-400 mb-8">
                <span>October 26, 2025</span>
                <span>&middot;</span>
                
                <span>JavaScript</span>
                
            </div>

            <div class="prose prose-lg lg:prose-xl dark:prose-invert max-w-none">
                <p>á» cÃ¡c bÃ i trÆ°á»›c, chÃºng ta Ä‘Ã£ xÃ¢y dá»±ng má»™t &ldquo;NhÃ  hÃ ng&rdquo; (Server) hoáº¡t Ä‘á»™ng theo kiá»ƒu REST API.</p>
<p><strong>Váº¥n Ä‘á» cá»§a REST API (Kiá»ƒu Bá»“i bÃ n ğŸ¤µ):</strong></p>
<ul>
<li>KhÃ¡ch (Client) muá»‘n gÃ¬, pháº£i gá»i Bá»“i bÃ n: &ldquo;Cho tÃ´i ly nÆ°á»›c!&rdquo;</li>
<li>Bá»“i bÃ n (HTTP Request) cháº¡y vÃ o báº¿p, láº¥y nÆ°á»›c, mang ra, rá»“i&hellip; biáº¿n máº¥t.</li>
<li>KhÃ¡ch muá»‘n thÃªm Ä‘Ã¡? Pháº£i gá»i Bá»“i bÃ n má»™t láº§n ná»¯a.</li>
<li><strong>Váº¥n Ä‘á» lá»›n nháº¥t:</strong> Báº¿p (Server) lÃ m xong mÃ³n, khÃ´ng thá»ƒ tá»± mang ra. Báº¿p pháº£i chá» Bá»“i bÃ n vÃ o há»i: &ldquo;MÃ³n xong chÆ°a?&rdquo;</li>
</ul>
<p>ÄÃ¢y lÃ  kiá»ƒu <strong>Há»i-ÄÃ¡p (Request-Response)</strong>. NÃ³ hoáº¡t Ä‘á»™ng, nhÆ°ng ráº¥t cháº­m vÃ  &ldquo;phiá»n phá»©c&rdquo; cho cÃ¡c á»©ng dá»¥ng cáº§n liÃªn tá»¥c, nhÆ° Chat, Game, hay xem Tá»· sá»‘ Trá»±c tiáº¿p.</p>
<h3 id="1-phÃ©p-loáº¡i-suy-cá»‘t-lÃµi-websocket-lÃ -gÃ¬"><em>1. PhÃ©p loáº¡i suy Cá»‘t lÃµi: WebSocket lÃ  gÃ¬?</em></h3>
<p><strong>WebSocket</strong> â˜ï¸ lÃ  má»™t cÃ´ng nghá»‡ giáº£i quyáº¿t dá»©t Ä‘iá»ƒm váº¥n Ä‘á» trÃªn.</p>
<p><strong>Analogy:</strong> Thay vÃ¬ liÃªn tá»¥c gá»i &ldquo;Bá»“i bÃ n&rdquo;, ngay khi KhÃ¡ch (Client) vÃ o bÃ n, chÃºng ta Ä‘áº·t má»™t <strong>Ä‘Æ°á»ng dÃ¢y Ä‘iá»‡n thoáº¡i ná»™i bá»™</strong> ğŸ“ káº¿t ná»‘i tháº³ng tá»« &ldquo;BÃ n Äƒn&rdquo; (Client) Ä‘áº¿n &ldquo;Báº¿p&rdquo; (Server).</p>
<p>ÄÆ°á»ng dÃ¢y Ä‘iá»‡n thoáº¡i nÃ y cÃ³ 3 Ä‘áº·c Ä‘iá»ƒm vÃ ng:</p>
<ol>
<li><strong>Thiáº¿t láº­p 1 láº§n (Handshake):</strong> KhÃ¡ch nháº¥c mÃ¡y &ldquo;Alo, Báº¿p nghe rÃµ khÃ´ng?&rdquo;. Báº¿p: &ldquo;RÃµ!&rdquo; (ÄÃ¢y lÃ  cÃº &ldquo;báº¯t tay&rdquo; HTTP ban Ä‘áº§u).</li>
<li><strong>LuÃ´n má»Ÿ (Persistent):</strong> Cáº£ hai bÃªn khÃ´ng cÃºp mÃ¡y. ÄÆ°á»ng dÃ¢y Ä‘Æ°á»£c giá»¯ má»Ÿ liÃªn tá»¥c.</li>
<li><strong>Hai chiá»u (Full-Duplex):</strong>
<ul>
<li><strong>Client -&gt; Server:</strong> KhÃ¡ch (Client) cÃ³ thá»ƒ nháº¥c mÃ¡y báº¥t cá»© lÃºc nÃ o vÃ  nÃ³i: &ldquo;BÃ n 5 gá»­i tin nháº¯n: &lsquo;ChÃ o báº¡n!&rsquo;&rdquo;</li>
<li><strong>Server -&gt; Client:</strong> Báº¿p (Server) cÃ³ thá»ƒ nháº¥c mÃ¡y báº¥t cá»© lÃºc nÃ o vÃ  thÃ´ng bÃ¡o: &ldquo;CÃ³ tin nháº¯n má»›i tá»« bÃ n 7: &lsquo;Báº¡n khá»e khÃ´ng?&rsquo;&rdquo;</li>
</ul>
</li>
</ol>
<p><strong>Káº¿t quáº£?</strong> Tin nháº¯n Ä‘Æ°á»£c gá»­i vÃ  nháº­n <strong>ngay láº­p tá»©c (real-time)</strong> mÃ  khÃ´ng cáº§n &ldquo;Bá»“i bÃ n&rdquo; (F5 hay Fetch) cháº¡y Ä‘i cháº¡y láº¡i.</p>
<h3 id="2"><em>2. &ldquo;Tá»•ng Ä‘Ã i&rdquo; hay &ldquo;Äiá»‡n thoáº¡i&rdquo; (NÃªn dÃ¹ng <code>ws</code> hay <code>socket.io</code>?)</em></h3>
<p>Node.js cung cáº¥p 2 cÃ´ng cá»¥ phá»• biáº¿n:</p>
<ul>
<li><code>ws</code>: Giá»‘ng nhÆ° má»™t cÃ¡i Ä‘iá»‡n thoáº¡i cÆ¡ báº£n. NÃ³ lÃ m Ä‘Ãºng má»™t viá»‡c lÃ  káº¿t ná»‘i WebSocket. Nhanh, gá»n, nhÆ°ng báº¡n pháº£i tá»± lÃ m má»i thá»© (tá»± káº¿t ná»‘i láº¡i khi rá»›t máº¡ng, tá»± chia phÃ²ng chat&hellip;).</li>
<li><code>socket.io</code>: Giá»‘ng nhÆ° má»™t <strong>Tá»•ng Ä‘Ã i ThÃ´ng minh</strong> ğŸ‘©â€ğŸ’¼. NÃ³ sá»­ dá»¥ng WebSocket lÃ m lÃµi, nhÆ°ng &ldquo;bá»c&rdquo; thÃªm ráº¥t nhiá»u tÃ­nh nÄƒng xá»‹n:
<ul>
<li><strong>Tá»± Ä‘á»™ng káº¿t ná»‘i láº¡i:</strong> Náº¿u Ä‘Æ°á»ng dÃ¢y (máº¡ng) bá»‹ nhiá»…u, nÃ³ tá»± Ä‘á»™ng gá»i láº¡i.</li>
<li><strong>PhÃ¡t sÃ³ng (Broadcasting):</strong> Cho phÃ©p &ldquo;Báº¿p&rdquo; hÃ©t má»™t tin nháº¯n cho <strong>táº¥t cáº£</strong> cÃ¡c bÃ n (Clients) Ä‘ang káº¿t ná»‘i.</li>
<li><strong>PhÃ²ng (Rooms):</strong> Cho phÃ©p báº¡n táº¡o cÃ¡c &ldquo;phÃ²ng chat riÃªng&rdquo; (vÃ­ dá»¥: chá»‰ bÃ n 5 vÃ  7 nÃ³i chuyá»‡n vá»›i nhau).</li>
<li><strong>TÆ°Æ¡ng thÃ­ch ngÆ°á»£c (Fallback):</strong> Náº¿u trÃ¬nh duyá»‡t quÃ¡ cÅ©, khÃ´ng biáº¿t &ldquo;Ä‘iá»‡n thoáº¡i&rdquo; (WebSocket) lÃ  gÃ¬, <code>socket.io</code> sáº½ tá»± Ä‘á»™ng chuyá»ƒn sang dÃ¹ng&hellip; &ldquo;Bá»“i bÃ n&rdquo; (HTTP) Ä‘á»ƒ giáº£ láº­p chat.</li>
</ul>
</li>
</ul>
<p><strong>Quyáº¿t Ä‘á»‹nh:</strong> Äá»‘i vá»›i á»©ng dá»¥ng chat, <code>socket.io</code> lÃ  lá»±a chá»n tá»‘t hÆ¡n ráº¥t nhiá»u. ChÃºng ta sáº½ dÃ¹ng nÃ³.</p>
<h3 id="3-bÆ°á»›c-1-xÃ¢y-dá»±ng"><em>3. BÆ°á»›c 1: XÃ¢y dá»±ng &ldquo;Tá»•ng Ä‘Ã i&rdquo; (Server-Side: Node.js + socket.io)</em></h3>
<p>ChÃºng ta sáº½ xÃ¢y dá»±ng &ldquo;Tá»•ng Ä‘Ã i&rdquo; (Server) biáº¿t láº¯ng nghe cÃ¡c &ldquo;cuá»™c gá»i&rdquo; (connections) vÃ  chuyá»ƒn &ldquo;tin nháº¯n&rdquo; (messages).</p>
<h4 id="a-chuáº©n-bá»‹-giá»‘ng-bÃ i-express"><em>A. Chuáº©n bá»‹ (Giá»‘ng bÃ i Express):</em></h4>
<ol>
<li>Táº¡o thÆ° má»¥c <code>realtime-chat-server</code>.</li>
<li><code>cd realtime-chat-server</code></li>
<li><code>npm init -y</code></li>
<li>ThuÃª &ldquo;Trá»£ lÃ½ Báº¿p&rdquo; (Express) vÃ  &ldquo;Tá»•ng Ä‘Ã i&rdquo; (Socket.io):</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install express socket.io
</span></span></code></pre></div><h4 id="b-viáº¿t-code"><em>B. Viáº¿t code <code>index.js</code> (TrÃ¡i tim cá»§a Tá»•ng Ä‘Ã i):</em></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 1. Triá»‡u há»“i &#34;Trá»£ lÃ½ Báº¿p&#34; vÃ  &#34;Tá»•ng Ä‘Ã i&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">express</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;express&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">http</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;http&#39;</span>); <span style="color:#75715e">// Cáº§n &#34;NgÆ°á»i xÃ¢y dá»±ng&#34; HTTP
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">Server</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;socket.io&#34;</span>); <span style="color:#75715e">// Láº¥y lá»›p &#34;Server&#34; tá»« socket.io
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">express</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2. PhÃ©p loáº¡i suy quan trá»ng:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// &#34;Tá»•ng Ä‘Ã i&#34; (socket.io) khÃ´ng thá»ƒ tá»± cháº¡y.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// NÃ³ cáº§n &#34;cÆ°á»¡i&#34; ğŸ‡ lÃªn má»™t &#34;con ngá»±a&#34; (HTTP Server) cÃ³ sáºµn.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// ChÃºng ta táº¡o &#34;con ngá»±a&#34; Ä‘Ã³ tá»« &#34;Trá»£ lÃ½ Báº¿p&#34; (Express).
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">server</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">createServer</span>(<span style="color:#a6e22e">app</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3. Báº£o &#34;Tá»•ng Ä‘Ã i&#34; (io) cÆ°á»¡i lÃªn &#34;con ngá»±a&#34; (server)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">io</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Server</span>(<span style="color:#a6e22e">server</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 4. (TÃ¹y chá»n) Báº£o &#34;Trá»£ lÃ½ Báº¿p&#34; phá»¥c vá»¥ &#34;Menu&#34; (file HTML)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/&#39;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">sendFile</span>(<span style="color:#a6e22e">__dirname</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;/index.html&#39;</span>); <span style="color:#75715e">// Gá»­i file HTML mÃ  ta sáº½ táº¡o
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 5. â­ï¸ ÄÃ‚Y LÃ€ PHÃ‰P THUáº¬T â­ï¸
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Dáº¡y &#34;Tá»•ng Ä‘Ã i&#34; (io) pháº£i lÃ m gÃ¬ khi cÃ³ &#34;Cuá»™c gá»i&#34; (connection)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;connection&#39;</span>, (<span style="color:#a6e22e">socket</span>) =&gt; {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Analogy: &#34;connection&#34; = má»™t &#34;KhÃ¡ch&#34; (Client) vá»«a nháº¥c mÃ¡y gá»i Ä‘áº¿n.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// &#34;socket&#34; = chÃ­nh lÃ  &#34;Ä‘Æ°á»ng dÃ¢y riÃªng&#34; ğŸ“ cá»§a ta vá»›i vá»‹ khÃ¡ch Ä‘Ã³.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Má»™t KhÃ¡ch Ä‘Ã£ káº¿t ná»‘i Ä‘Æ°á»ng dÃ¢y!&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Dáº¡y &#34;Tá»•ng Ä‘Ã i&#34; láº¯ng nghe &#34;lá»i nÃ³i&#34; tá»« Ä‘Æ°á»ng dÃ¢y riÃªng Ä‘Ã³
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// Khi KhÃ¡ch Ä‘Ã³ nÃ³i (emit) má»™t sá»± kiá»‡n tÃªn lÃ  &#39;chat message&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;chat message&#39;</span>, (<span style="color:#a6e22e">msg</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Tin nháº¯n tá»« KhÃ¡ch: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">msg</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Analogy: &#34;Báº¿p&#34; (Server) nháº­n Ä‘Æ°á»£c tin.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// Giá» &#34;Báº¿p&#34; (io) hÃ©t lÃªn cho Táº¤T Cáº¢ cÃ¡c Ä‘Æ°á»ng dÃ¢y khÃ¡c
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// (táº¥t cáº£ cÃ¡c KhÃ¡ch) Ä‘á»u nghe tháº¥y.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;chat message&#39;</span>, <span style="color:#a6e22e">msg</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Dáº¡y &#34;Tá»•ng Ä‘Ã i&#34; xá»­ lÃ½ khi KhÃ¡ch &#34;cÃºp mÃ¡y&#34; (disconnect)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;disconnect&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Má»™t KhÃ¡ch Ä‘Ã£ cÃºp mÃ¡y.&#39;</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 6. Má»Ÿ cá»­a &#34;NhÃ  báº¿p&#34; VÃ€ &#34;Tá»•ng Ä‘Ã i&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">PORT</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3000</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">PORT</span>, () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Tá»•ng Ä‘Ã i Ä‘ang láº¯ng nghe á»Ÿ cá»•ng </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">PORT</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="4-bÆ°á»›c-2-láº¯p"><em>4. BÆ°á»›c 2: Láº¯p &ldquo;Äiá»‡n thoáº¡i BÃ n&rdquo; (Client-Side: HTML + JS)</em></h3>
<p>Giá» chÃºng ta táº¡o file <code>index.html</code> Ä‘á»ƒ &ldquo;KhÃ¡ch&rdquo; (Client) cÃ³ cÃ¡i Ä‘á»ƒ &ldquo;gá»i&rdquo; vÃ  &ldquo;nghe&rdquo;.</p>
<h4 id="a-táº¡o-file"><em>A. Táº¡o file <code>index.html</code> (Äáº·t chung thÆ° má»¥c <code>index.js</code>):</em></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">title</span>&gt;Chat Real-time&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">body</span> { <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">padding-bottom</span>: <span style="color:#ae81ff">3</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">font-family</span>: <span style="color:#66d9ef">sans-serif</span>; }
</span></span><span style="display:flex;"><span>    #messages { <span style="color:#66d9ef">list-style-type</span>: <span style="color:#66d9ef">none</span>; <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span>; }
</span></span><span style="display:flex;"><span>    #messages <span style="color:#f92672">li</span> { <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>; }
</span></span><span style="display:flex;"><span>    #messages <span style="color:#f92672">li</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">odd</span><span style="color:#f92672">)</span> { <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#efefef</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">form</span> { <span style="color:#66d9ef">background</span>: rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.1</span>); <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.25</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">fixed</span>; <span style="color:#66d9ef">bottom</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">left</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">right</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">input</span> { <span style="color:#66d9ef">border</span>: <span style="color:#66d9ef">none</span>; <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">flex-grow</span>: <span style="color:#ae81ff">1</span>; <span style="color:#66d9ef">margin-right</span>: <span style="color:#ae81ff">.25</span><span style="color:#66d9ef">rem</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">button</span> { <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#007bff</span>; <span style="color:#66d9ef">border</span>: <span style="color:#66d9ef">none</span>; <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">white</span>; }
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">ul</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;messages&#34;</span>&gt;&lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form&#34;</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input&#34;</span> <span style="color:#a6e22e">autocomplete</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;off&#34;</span> /&gt;&lt;<span style="color:#f92672">button</span>&gt;Gá»­i&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/socket.io/socket.io.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 3. &#34;NHáº¤C MÃY LÃŠN!&#34; ğŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// &#34;io()&#34; = Tá»± Ä‘á»™ng gá»i Ä‘áº¿n &#34;Tá»•ng Ä‘Ã i&#34; (Server)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// Ä‘Ã£ phá»¥c vá»¥ trang web nÃ y.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">socket</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">io</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Láº¥y cÃ¡c pháº§n tá»­ HTML
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">form</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;form&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">input</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;input&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">messages</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;messages&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 4. HÃ€NH Äá»˜NG 1: Gá»¬I TIN (NÃ³i ğŸ—£ï¸)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// Khi KhÃ¡ch nháº¥n nÃºt &#34;Gá»­i&#34;...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">form</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;submit&#39;</span>, (<span style="color:#a6e22e">e</span>) =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>(); <span style="color:#75715e">// NgÄƒn trang F5 (lÃ m máº¥t &#34;Bá»“i bÃ n&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">value</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// &#34;NÃ³i&#34; vÃ o Ä‘iá»‡n thoáº¡i (emit) sá»± kiá»‡n &#39;chat message&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// kÃ¨m theo &#34;lá»i nÃ³i&#34; (input.value)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;chat message&#39;</span>, <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">value</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>; <span style="color:#75715e">// XÃ³a Ã´ chat
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 5. HÃ€NH Äá»˜NG 2: NHáº¬N TIN (Nghe ğŸ§)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// &#34;Láº¯ng nghe&#34; Ä‘iá»‡n thoáº¡i.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// Khi &#34;Tá»•ng Ä‘Ã i&#34; (Server) hÃ©t (emit) sá»± kiá»‡n &#39;chat message&#39;...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;chat message&#39;</span>, (<span style="color:#a6e22e">msg</span>) =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// ...láº¥y &#34;lá»i nÃ³i&#34; (msg) Ä‘Ã³...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">item</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#39;li&#39;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">textContent</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">msg</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// ...vÃ  thÃªm vÃ o danh sÃ¡ch chat trÃªn mÃ n hÃ¬nh.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">messages</span>.<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">item</span>);
</span></span><span style="display:flex;"><span>      window.<span style="color:#a6e22e">scrollTo</span>(<span style="color:#ae81ff">0</span>, document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">scrollHeight</span>); <span style="color:#75715e">// Cuá»™n xuá»‘ng cuá»‘i
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    });
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><h3 id="5-cháº¡y-thá»­-nghiá»‡m"><em>5. Cháº¡y thá»­ nghiá»‡m!</em></h3>
<ol>
<li>
<p>Cháº¡y Server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node index.js
</span></span></code></pre></div><p>(Báº¡n sáº½ tháº¥y: <code>Tá»•ng Ä‘Ã i Ä‘ang láº¯ng nghe á»Ÿ cá»•ng 3000</code>)</p>
</li>
<li>
<p>Má»Ÿ trÃ¬nh duyá»‡t (vÃ­ dá»¥: Chrome) vÃ  truy cáº­p: <code>http://localhost:3000</code></p>
</li>
<li>
<p>Má»Ÿ má»™t trÃ¬nh duyá»‡t khÃ¡c (vÃ­ dá»¥: Firefox) hoáº·c má»™t Tab áº¨n danh vÃ  cÅ©ng truy cáº­p: <code>http://localhost:3000</code></p>
</li>
<li>
<p>Äáº·t 2 cá»­a sá»• cáº¡nh nhau.</p>
</li>
<li>
<p>GÃµ tin nháº¯n vÃ o cá»­a sá»• nÃ y, vÃ  nháº¥n <strong>Gá»­i</strong>.</p>
</li>
</ol>
<p><strong>Káº¿t quáº£:</strong> Tin nháº¯n sáº½ xuáº¥t hiá»‡n <strong>ngay láº­p tá»©c</strong> âš¡ á»Ÿ cá»­a sá»• kia mÃ  khÃ´ng cáº§n F5 hay táº£i láº¡i trang.</p>
<p>Báº¡n Ä‘Ã£ thÃ nh cÃ´ng! Báº¡n Ä‘Ã£ &ldquo;cÃ i Ä‘áº·t Ä‘Æ°á»ng dÃ¢y Ä‘iá»‡n thoáº¡i ná»™i bá»™&rdquo; (WebSocket) vÃ  bá» Ä‘i &ldquo;ngÆ°á»i bá»“i bÃ n&rdquo; (HTTP) phiá»n phá»©c, táº¡o ra má»™t á»©ng dá»¥ng chat thá»i gian thá»±c hoÃ n chá»‰nh.</p>

            </div>
        </article>

        
        
        
        <aside class="hidden lg:block lg:w-64 xl:w-72 flex-shrink-0">
            <div class="sticky top-24 space-y-4">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Má»¥c lá»¥c</h3>
                <nav class="toc">
                    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-phÃ©p-loáº¡i-suy-cá»‘t-lÃµi-websocket-lÃ -gÃ¬"><em>1. PhÃ©p loáº¡i suy Cá»‘t lÃµi: WebSocket lÃ  gÃ¬?</em></a></li>
        <li><a href="#2"><em>2. â€œTá»•ng Ä‘Ã iâ€ hay â€œÄiá»‡n thoáº¡iâ€ (NÃªn dÃ¹ng <code>ws</code> hay <code>socket.io</code>?)</em></a></li>
        <li><a href="#3-bÆ°á»›c-1-xÃ¢y-dá»±ng"><em>3. BÆ°á»›c 1: XÃ¢y dá»±ng â€œTá»•ng Ä‘Ã iâ€ (Server-Side: Node.js + socket.io)</em></a></li>
        <li><a href="#4-bÆ°á»›c-2-láº¯p"><em>4. BÆ°á»›c 2: Láº¯p â€œÄiá»‡n thoáº¡i BÃ nâ€ (Client-Side: HTML + JS)</em></a></li>
        <li><a href="#5-cháº¡y-thá»­-nghiá»‡m"><em>5. Cháº¡y thá»­ nghiá»‡m!</em></a></li>
      </ul>
    </li>
  </ul>
</nav>
                </nav>
            </div>
        </aside>
        

    </div>
</div>

        </main>

        
        <footer class="bg-transparent border-t border-gray-200 dark:border-gray-700">
    <div class="max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <p class="text-center text-sm text-gray-500 dark:text-gray-400">
            
            Â© 2025 NgÃ´ Quá»‘c ToÃ n. ÄÃ£ Ä‘Äƒng kÃ½ báº£n quyá»n.
        </p>
    </div>
</footer>
    </div>

    
    <script src="/js/main.js"></script>

    
</body>
</html>
