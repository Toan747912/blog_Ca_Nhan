{{/* File này định nghĩa giao diện cho 1 thẻ bài viết 
  Nó được gọi bởi tệp list.html
*/}}
{{ $categories := .Params.categories | default (slice) }}
{{ $urlized_categories := slice }}
{{ range $categories }}
    {{ $urlized_categories = $urlized_categories | append (. | urlize) }}
{{ end }}
{{ $category_string := delimit $urlized_categories " " }}

<article class="post-card flex flex-col rounded-lg shadow-lg overflow-hidden dark:border dark:border-gray-700 transition-transform duration-300 hover:scale-[1.02]" data-categories="{{ $category_string }}">
    <a href="{{ .Permalink }}" class="block flex-shrink-0">
        <!-- Ảnh đại diện (lấy từ front matter: image:) -->
        <img class="h-56 w-full object-cover object-center" 
             src="{{ .Params.image | default "https://placehold.co/600x400/60a5fa/white?text=Blog+Post" }}" 
             alt="Ảnh đại diện cho bài viết {{ .Title }}">
    </a>
    
    <div class="flex-1 bg-white dark:bg-gray-800 p-6 flex flex-col justify-between">
        <div class="flex-1">
            <!-- Thẻ Danh mục (Java/JavaScript) -->
            <div class="text-sm font-medium flex flex-wrap gap-2">
                {{ range .Params.categories }}
                    {{ $categoryURL := printf "/categories/%s" (. | urlize) }}
                    {{ $style := "" }}
                    {{ if eq . "Java" }}
                        {{ $style = "bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100 hover:bg-red-200 dark:hover:bg-red-800" }}
                    {{ else if eq . "JavaScript" }}
                        {{ $style = "bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-100 hover:bg-yellow-200 dark:hover:bg-yellow-800" }}
                    {{ else if eq . "Node.js" }}
                        {{ $style = "bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-100 hover:bg-emerald-200 dark:hover:bg-emerald-800" }}
                    {{ else if eq . "WebSocket" }}
                        {{ $style = "bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-100 hover:bg-indigo-200 dark:hover:bg-indigo-800" }}
                    {{ else }}
                        {{ $style = "bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-600" }}
                    {{ end }}
                    <a href="{{ $categoryURL }}" class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium transition-colors duration-200 {{ $style }}">
                        {{ . }}
                    </a>
                {{ end }}
            </div>
            
            <!-- Tiêu đề và Mô tả ngắn -->
            <a href="{{ .Permalink }}" class="block mt-4 group">
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-white group-hover:underline">
                    {{ .Title }}
                </h3>

            </a>
        </div>
        
        <!-- Ngày đăng -->
        <div class="mt-6 flex items-center">
            <div class="text-sm text-gray-500 dark:text-gray-400">
                <time datetime="{{ .Date.Format "2006-01-02" }}">
                    {{ .Date.Format "January 2, 2006" }}
                </time>
            </div>
        </div>
    </div>
</article>
